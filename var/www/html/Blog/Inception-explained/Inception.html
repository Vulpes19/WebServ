<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Inception</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="e9df0b89-eb3d-44bd-81af-5e7e6d7e0fb8" class="page sans"><header><h1 class="page-title">Inception</h1></header><div class="page-body"><p id="353a3dfa-5a87-4670-8273-acd4482f07c1" class="block-color-pink">
</p><h1 id="728d0d98-1c7d-4861-994b-fea547b211d3" class="">Docker</h1><p id="a440a29b-632b-4d7a-89ff-c8a49a06f387" class="">is a software framework, for building, runnning and managing containers on servers and the cloud.</p><p id="a7ec1af7-38c8-49e5-a5f5-eb3beecd915a" class="">Same as shipping containers and how they make cargo easily transported by train truck or ship.</p><p id="78de649f-3a5d-46c4-b9b7-dd5dbb665323" class="">Allows the web app to be easily moved between different environments.</p><h2 id="0a4eb16d-6b8c-47cc-92a1-d9c78d418328" class="">How does Docker work?</h2><p id="8b8c247a-9c1e-4248-85bf-9da2943ed997" class="">Docker containers share the host machine’s kernel. But they run as isolated processes in their own user space on the host operating system.</p><p id="93596d82-9049-4abc-b3af-b68c9e69a586" class="">They are similar to VMs but with some important differences.</p><p id="5860b31a-def7-4e6b-a5b6-3ebb83161bc5" class="">
</p><p id="86875398-ddd6-41be-98d8-dfea1169c683" class="">Both VMs and Docker containers provide an isolated environment for running applications, with their own file system, networking and process space.</p><p id="af19400d-693b-4da5-bef7-709806e6aa6c" class="">This allows you to run multiple containers on the same host (docker compose), each with its own configuration, without interfering with each other.</p><p id="896b212a-d94e-4ed4-8859-55b7d70f7cc8" class="">Docker does not include a full copy of the host OS. Instead, they use the host machine’s kernel and rely on the host for system calls.</p><h2 id="be684f88-461c-47e5-9e13-8f7117e99b8e" class="">Key differences between VMs and Docker</h2><ol type="1" id="1611a899-9934-4cf8-b5f5-06d0e40ffadb" class="numbered-list" start="1"><li>Operating System Isolation<p id="cd84a1fb-ec25-446b-821c-2475dd9ee4b0" class=""><strong>VMs</strong> run on a full copy of an OS, including a separate kernel.</p><p id="4b8b9aa0-8f87-4f9f-9687-bbe2e33a9c86" class="">This provides a high level isolation between the host machine and the virtual machine, as the virtual machine has its own operating system and can run different software than the host machine.</p><p id="3bb8c704-084d-461a-8cab-e05ad4640ed6" class=""><strong>Docker</strong> containers, share the host machine’s kernel and rely on the host for system calls.</p><p id="9e98946c-a7e1-47d7-8150-8c91b62269e5" class="">This means that they don’t have their own OS, but run as <mark class="highlight-teal"><a href="https://www.notion.so/How-does-docker-run-as-an-isolated-process-in-the-host-machine-OS-2d79fa8b22d3414394d931f953e6d807">isolated processes</a></mark> (click for juicy details) within the host operating system’s user space.</p><p id="38a8c593-b54f-420e-bb46-c65732173b56" class="">This however provides less isolation than VMs but it also makes docker containers lighter and faster.</p></li></ol><ol type="1" id="b109dea3-84e8-429d-b337-b20234f908da" class="numbered-list" start="2"><li>Resource Utilization:<p id="5c3cdc8a-2f50-41ba-87dc-cf4f3a97ffe8" class="">Since <strong>VMs</strong> run a full copy of the OS they require a large amount of system resources such as memory and disk space.</p><p id="27883c06-9e89-4e1e-941e-c66d4b445ab0" class=""><strong>Docker containers</strong> share the host machine resources, but they have their own isolated process space and file system. This allows Docker to provide resource isolation and management, making it easier to allocate resources to individual containers.</p></li></ol><ol type="1" id="a0181da8-e7ee-431b-8ec9-b4fda3ddc6ef" class="numbered-list" start="3"><li>Deployment and Portability:<p id="16b8522b-9924-46ac-966a-125d7ca89165" class="">Virtual machines are typically deployed as standalone units, with each VM running its own copy of the host OS, which makes it more challenging to deploy and manage multiple virtual machines in a large scale environment.</p><p id="87ebea32-bf18-43eb-a12c-0b5e3c6982a9" class="">Docker containers on the other hand can be easily deployed as a group using Docker compose for example. This makes them easier to manage and deploy apps in a cloud environment or move apps from one host to another.</p></li></ol><h1 id="843bfb0e-4160-4dec-8e39-51cb26998a64" class="">Understanding Containers</h1><p id="a674b9ae-eb0e-47d8-8d64-660b1b6ce0a1" class="">Can be devided to three parts:</p><ul id="d5cee9ff-df76-4099-8f36-a21b9e711966" class="bulleted-list"><li style="list-style-type:disc">Builder: a series of tools used to build a container, examples would be:<ul id="a9827ddf-3292-46b5-965a-ca036a2418bc" class="bulleted-list"><li style="list-style-type:circle">Distrobuilder for LXC (Linux Containers): image building tool.</li></ul><ul id="c3651f05-877f-4404-b934-a1de22711cd0" class="bulleted-list"><li style="list-style-type:circle">Dockerfile for Docker: build docker image.</li></ul></li></ul><ul id="591db6bc-bb74-4b0d-bcc6-77e8f9711023" class="bulleted-list"><li style="list-style-type:disc">Engine: an app used to run a container. (refers to the <span style="border-bottom:0.05em solid"><strong>docker</strong></span> command and the <code><em><strong><span style="border-bottom:0.05em solid">dockerd</span></strong></em></code> daemon)</li></ul><ul id="baa2ae62-7f31-463a-a813-fc768c97bf8d" class="bulleted-list"><li style="list-style-type:disc">Orchestration: technology used to manage many containers.</li></ul><p id="4d05e635-50ba-4e59-a9ce-3dc43262e0a9" class="">Containers are a runnable instance of an image. You can create, start, stop, move or delete a container using the Docker API.</p><p id="4fd54cbb-11a6-452d-8d5b-31e4f7c9d36d" class="">You can connect a container to one or more networks, attach storage to it, or create an image based on its current state.</p><p id="8bf27201-b8e6-4ffc-ab33-4b0b34d92649" class="">A container is defined by its image as well as any configuration options you provide to it when you create or start it. When a container is removed, any changes to its state that are not stored in persistent storage disappear.</p><p id="1a30cb61-0ebc-465f-a35b-8e13bf3a833c" class="">
</p><h2 id="3e1c9e94-b3c7-435e-b6c0-afd0d30059ac" class="">Okay, but what are containers?</h2><p id="2f6f6b71-fa3f-4bed-8ecc-33b91e5e0941" class="">You can think of Docker containers as a shipping container for software. Just like a shipping container it <strong>holds</strong> all kinds of ‘products’ and can be <strong>loaded</strong> into ships, trains or trucks and <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>transported</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> across the world. Similarly a Docker container is a unit that can <strong><strong><strong><strong><strong>hold </strong></strong></strong></strong></strong>software and can be <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>deployed </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>across different environments.</p><p id="850b5e63-db72-42d6-a003-d4056e44e146" class="">
</p><h2 id="e7f59655-3176-46d9-9c85-dd85df39e822" class="">How does this relate to what I’m doing here?</h2><p id="48341fbe-5cd1-4e0b-b0d9-5607eac75a7f" class="">Using docker containers is like using Lego blocks to build a complex structure, in our case we’re required to build web app, that has three services: a web server (nginx), a database (mariadb), and the interactive part with the user (wordpress). These services are the building blocks to the app, and need to be contained in seperate different containers. and In order to create those building blocks (just like the diagram bellow) we need what we call ‘<span style="border-bottom:0.05em solid"><strong>images</strong></span>’.</p><p id="d7906803-dc45-431a-b858-f87f2622009d" class="">
</p><figure id="279a10ca-c866-415e-83f2-9040a2379b48" class="image"><a href="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/dockerfiles-images-containers.png"><img style="width:961px" src="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/dockerfiles-images-containers.png"/></a></figure><h1 id="7d2ae9ac-c646-4ed8-b6f1-c9c448b49c00" class="">Images</h1><p id="a30794db-9654-46d9-9f01-f113ab1e498e" class="">To keep the Legos analogy, in order for us to create a lego block, we need a <strong><strong><strong><strong><strong><strong><strong><strong><strong>blueprint</strong></strong></strong></strong></strong></strong></strong></strong></strong> or a <strong><strong><strong><strong><strong>mold </strong></strong></strong></strong></strong>so we could know what or how that block would look like. So images are templates that we use to create containers in whatever parameters or characteristics we need.</p><p id="c495e244-34c0-4041-93fc-e3cc6b02a995" class="">Analogies aside, Docker images are the blueprints of docker containers, they are read-only that contains a snapshot of a Docker container. They are a binary file that inclues all the dependencies and configurations required to run an application. In consists of:</p><ul id="1e16d287-4fc3-4c1e-a911-e395eca8108f" class="bulleted-list"><li style="list-style-type:disc">A base operating system</li></ul><ul id="aa107e8c-de27-4a81-a8a5-42e593d0f5b4" class="bulleted-list"><li style="list-style-type:disc">Application code</li></ul><ul id="48fadcf6-2a14-49c8-93ba-6184a5acf9d9" class="bulleted-list"><li style="list-style-type:disc">Any dependencies or libraries required to run the application.</li></ul><p id="81061e38-6bf0-4e96-b53c-f8e7f97ce446" class="">Images can also be stored in a Docker registry, such as Docker Hub, where they can be shared and use by others.</p><h2 id="d5cecae7-8340-4637-9d4e-e5021c0ba843" class="">How could I create an image?</h2><p id="9ec4b481-aa03-45b5-80e9-10a2fd3b18c8" class="">In order to create an image, we execute or <em><strong><em><strong><em><strong><em><strong><em><strong>build</strong></em></strong></em></strong></em></strong></em></strong></em> a Dockerfile, which specifies the OS, software dependencies and configuration settings. You may be asking what is a Docker..file..? </p><h2 id="f5efb7f3-9a50-4ca1-87b7-b653d91a55d8" class="">Now, dockerfiles!</h2><p id="ca3cb431-50b1-4156-9cce-20742dc0a477" class="">PS: I’ll be using nginx as an example here.</p><p id="1e615874-24f3-45f2-a19e-4675023cd177" class="">A Dockerfile is a text document that contains all the commands we would use to build our image.</p><p id="e6ae77ec-b1a6-4c9b-8f14-38be71cd836d" class="">Docker reads the instructions given in the file and will use them to automatically build our image.</p><p id="97931032-ad44-494b-a057-a2e8d389b64e" class="">an example of a Dockerfile would be something like this:</p><pre id="a57bacc8-bd51-45c8-8bab-adf9554a6ea5" class="code"><code>FROM debian:buster

RUN apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install nginx 

COPY index.html /usr/share/nginx/html

EXPOSE 443

CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code></pre><p id="88491c3c-91b5-4a93-90bb-d2b953aa96c5" class="">
</p><p id="7fb88c26-9a26-4be9-8a81-d3d7af779135" class="">Above is a dockerfile that would build an image that will run an Nginx web server on port 8080, serving a custom ‘index.html’ file.</p><p id="23818ff6-cac7-4b93-b5ff-cc64c91d1384" class="">
</p><p id="158cc550-aadb-48a1-9254-94fd504c7a0f" class="">Here’s a breakdown of each instruction:</p><ol type="1" id="bbc7b31e-f1bb-46d7-bbd0-1bc04016cc06" class="numbered-list" start="1"><li><strong><code>FROM debian:buster</code></strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>: </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>Specifies the base image that this docker Image will be build on top of. In this case, its the offician Debian Buster base image.</li></ol><ol type="1" id="97cde841-d7c7-4530-89de-ca561b7e403d" class="numbered-list" start="2"><li><code><strong>RUN apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install nginx</strong></code>: This instruction runs commands inside the Docker container to update the package list, upgrade any existing packages, and install the Nginx web server.</li></ol><ol type="1" id="60b1777f-4c4a-4eef-97ef-9461c90fdb03" class="numbered-list" start="3"><li><code><strong>COPY index.html /usr/share/nginx/html</strong></code>: This instruction copies the <code><strong>index.html</strong></code> file from the Docker build context (the directory where the Dockerfile resides) to the <code><strong>/usr/share/nginx/html</strong></code> directory inside the container. This is where Nginx looks for the default webpage to serve.</li></ol><ol type="1" id="6f6ac513-1fcc-45ba-bc8b-80f495ba8b54" class="numbered-list" start="4"><li><code><strong>EXPOSE 443</strong></code>: This instruction informs Docker that the container will listen on port 443.</li></ol><ol type="1" id="427ba894-2b3d-432a-95ca-14e6f25ca185" class="numbered-list" start="5"><li><code><strong>CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</strong></code>: This instruction specifies the default command to run when the container is started. In this case, it starts the Nginx web server and keeps it running in the foreground with the <code><strong>daemon off;</strong></code> option.</li></ol><p id="8b0ca2a7-dea0-4fb6-b4df-f4d1df42bd3d" class="">
</p><h2 id="135b7c22-2627-47d2-9d08-443db7d9adf2" class="">Now we have a Dockerfile, so how do we create an image?</h2><p id="473fbc12-63e7-486c-93a6-63bab50ca2fd" class="">By executing this command, a Docker image is created from the Dockerfile given.</p><pre id="feca4863-392f-460a-a5be-1d071de0b9d5" class="code"><code>docker build . -t &lt;new_image_name&gt; .</code></pre><p id="5fffefe1-4ac9-402f-b084-e60abc573bce" class="">
</p><ul id="ee51fbf9-24a2-405d-a35a-85ccf6b60724" class="bulleted-list"><li style="list-style-type:disc">-t : is used to give the image a name.</li></ul><ul id="8124e50b-c10b-4460-bc56-4e6724356eec" class="bulleted-list"><li style="list-style-type:disc">.  : is used to specify the current directory (MUST NOT FORGET)</li></ul><p id="76045b43-54ff-4648-a32e-2de57c69d351" class="">
</p><p id="d42a8072-2759-46cb-8304-429fdc77f37e" class="">Then we can verify if the image was created:</p><pre id="1b90a635-39dc-4398-a860-f934b27fa792" class="code"><code>docker images</code></pre><p id="423ad7a7-cf41-4874-aaca-364d0a8920cf" class="">The output would be something like this:</p><figure id="b6d26954-be1b-433c-91d5-2dda0a3080d8" class="image"><a href="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-02-28_at_6.35.45_PM.png"><img style="width:852px" src="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-02-28_at_6.35.45_PM.png"/></a></figure><h2 id="24eed1e1-9bc7-4932-9e1c-4edaae910027" class="">After building an image, now we use it to create a container:</h2><p id="f399d6b6-9e9a-4598-96b7-5d2aed96bb30" class="">The command needed to do that:</p><pre id="4ba676a0-783f-4975-85b4-8f4d5ef43dfd" class="code"><code>docker run -dp 443:443 nginx_image</code></pre><ul id="6a50fd25-2acc-4273-9738-9786e98ebbbb" class="bulleted-list"><li style="list-style-type:disc">-d: stands for detached, which means that our Docker container is running in the background of our terminal.</li></ul><ul id="80a6f58b-7fd3-4169-b136-780ff8ab3537" class="bulleted-list"><li style="list-style-type:disc">-p: stands for publish, which is a way of mapping our running container port (443) to the host port (443).</li></ul><p id="9b57c3c3-efbe-424f-a649-e476c56ce9a5" class="">
</p><p id="2222eff9-8f72-458c-abcf-67fecadd20da" class="">This would output something like this:</p><pre id="a1e7472d-607a-4522-b0b8-820dc93879dd" class="code"><code>993bbfcd3c7c913e3bef595ba389237250e381c031a153df9ce5506f3ddf03f4</code></pre><p id="5c6aa0fa-ccaf-4b64-9a88-254f29e530e7" class="">This is what we call a Container ID, and it’s a unique identifier that Docker generates for each container instance. It is used to manage the container, such as stopping or starting it, inspecting it’s status, or attaching to it’s console (which I’ll show you how to do it shortly)</p><p id="3b416dbf-9461-4082-9db4-503556320657" class="">
</p><p id="34fc81ee-e96e-4589-9cff-34575e1ca0ce" class="">We can run this command <code>docker ps</code> to verify if the container is running.</p><figure id="07818f41-13fa-41af-bb6f-ba6281c12644" class="image"><a href="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-02-28_at_6.51.59_PM.png"><img style="width:1772px" src="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-02-28_at_6.51.59_PM.png"/></a></figure><p id="f83d3215-62ee-4523-a6e5-9b30c486e566" class="">
</p><p id="a74664d0-cb6a-4613-8edb-d28794a8b021" class="">Now we can attach to the container’s console by executing this command:</p><pre id="3acb8109-b62b-47ef-b9fd-c9e6a47d70f6" class="code"><code>docker exec -it nginx bash </code></pre><ul id="460af5f5-f5c0-4562-8e04-544f6225383e" class="bulleted-list"><li style="list-style-type:disc"><code>-it</code>: enables an interactive terminal to the container.</li></ul><ul id="2cd7413d-8dbd-46a4-b2eb-e9b4190e6a7c" class="bulleted-list"><li style="list-style-type:disc"><code>nginx</code>: name of the container</li></ul><ul id="52a7ad4e-8533-42f0-a0d8-dd26209fcace" class="bulleted-list"><li style="list-style-type:disc"><code>bash</code>: tells docker to open a Bash shell inside the container</li></ul><p id="2464765c-7e97-47e0-94d3-326d876a7c24" class="">
</p><p id="58411c6b-e38d-463c-9fa6-be5bf6a71041" class="">When the command is executed the container terminal is open. You can use this as a way of testing commands or overall environment before adding the instructions to the Dockerfile.</p><p id="665a8073-e403-4035-9b95-19c9c9c25e38" class="">
</p><h2 id="d60f117d-fde5-4249-8dd1-1929baca9517" class="">Now, off to the serious stuff!</h2><p id="5d036213-5417-48ce-9ead-1b61c3672f73" class="">Now you know what Docker, Images and containers are, as you may have noticed I used NGINX as an example, which begs the question, what the heck is NGINX? </p><h1 id="a63db7ea-3d27-48d0-9a7f-eaf91a725ea3" class=""><mark class="highlight-teal">NGINX</mark></h1><p id="3544cbe8-c2ad-4862-9170-ced5cfe8f091" class="">is an open source web server that is now also used as a reverse proxy, HTTP cache, and load balancer.</p><p id="d0dbd89c-96e6-4eff-9e10-6271baf37e1f" class=""><em>reverse proxy: sits in front of a web server and receives all the requests before they reach the origin server. Reverse proxies are typically used to </em><em><a href="https://kinsta.com/blog/third-party-performance/">enhance performance</a></em><em> (find out how by clicking there)
, security, and reliability of the web server.</em></p><p id="e1eab70c-e5d8-478b-9652-879c36b90849" class=""><em>HTTP cache: a mechanism that allows web browsers and servers to temporarly store or cache certain resources (such as images, scripts, and stylesheets) on a client’s device. For performance gains.</em></p><p id="6627f743-a97a-4365-85d3-864eca1a6ca3" class=""><em>Load balancer is a device or software that distributes incoming network traffic across multiple servers.</em></p><p id="3a49c850-67be-4af4-b5cf-dae6b9fd3b67" class="">To put it simply, NGINX can be thought of as a concierge in a hotel. When guests arrive at the hotel, the concierge greets them and directs them to the appropriate rooms. Similarly, Nginx greets incoming requests to a server and directs them to the appropriate web application or service running on the server.  </p><p id="99752477-5823-473a-ae2f-8228fae057c7" class="">Just as a concierge can handle multiple guests at the same time, Nginx can handle multiple incoming requests and direct them to the correct destination simultaneously. And just as a concierge can be customized to provide different services or amenities, Nginx can be configured to serve different web applications or services on a server, based on the incoming request.</p><p id="6ee97476-f1ec-40dd-a695-22759a48d54e" class="">In order to setup an nginx web server an nginx configuration file is needed:</p><h1 id="c3afcbc3-11c6-4250-81e6-5c26ec43b297" class=""><mark class="highlight-teal_background">NGINX Server configuration</mark></h1><p id="1bc1008b-9727-4223-92b1-735e2e289cb6" class="">Similar to Dockerfiles, an nginx configuration file is like a recipe book that the chef uses to make a dish, nginx in this sense is the chef, and you may have guessed nginx.conf is the recipe book. It specifies how <strong><strong><strong><strong><strong>nginx</strong></strong></strong></strong></strong> should behave, what it should do when it receives requests, and how it should respond to those requests as sets of instructions, these instructions include things like which port to listen on, which servers to proxy requests to and how to handle different types of requests.</p><p id="2d682bf6-c2c4-4369-afb5-89945a2fe1ec" class="">All Nginx configuration files are located in<code> /etc/nginx/</code> directory.</p><p id="e22b3d3d-87bc-46b9-b419-2b46c08ee050" class="">The primary configuration file is <code>/etc/nginx/nginx.conf</code>.</p><p id="59f36fe8-05c6-4224-a2d7-86443f0e1db3" class="">NGINX configurations are setup by:</p><ol type="1" id="20418989-ff8a-465b-b790-c3d2c131e46c" class="numbered-list" start="1"><li><a href="https://nginx.org/en/docs/dirindex.html"><mark class="highlight-teal">directives</mark></a><mark class="highlight-teal"> - </mark>they are NGINX configuration options, examples:<ul id="645ddb74-6cb6-4805-a839-f925bdc692a6" class="bulleted-list"><li style="list-style-type:disc">user,</li></ul><ul id="8665b239-b9a0-428b-ad5a-f27a346a077f" class="bulleted-list"><li style="list-style-type:disc">worker_processes,</li></ul><ul id="a967c7f4-0b34-4462-a722-ee636d7d9c9e" class="bulleted-list"><li style="list-style-type:disc">error_log, </li></ul><ul id="5cb54006-e351-482a-b831-03e7a0ff421f" class="bulleted-list"><li style="list-style-type:disc">pid</li></ul></li></ol><ol type="1" id="843bb32d-e3e8-4c6e-841d-0dc299e05b7f" class="numbered-list" start="2"><li>Blocks (also known as contexts) - Groups in which directives are organized.</li></ol><p id="cf9efdc8-305a-4bd3-8c8f-c1cfd7a04b44" class="">
</p><p id="b93a1e66-47d4-4144-ab14-6941ff579e59" class="">NOTE: any character after <code>#</code> in a line becomes a comment. And NGINX does not interpret it.</p><p id="35f0fda3-ac6e-4e6d-b3bf-79d50cf1e227" class="">
</p><p id="ae8e2563-4050-420d-b009-10c50eb0082a" class="">An example of an nginx.conf file:</p><pre id="3060143a-d7e4-4ed8-bc6c-92171f17995c" class="code"><code>user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
       . . .
}

http {
       . . .
}</code></pre><p id="7f887933-e457-42a9-a613-02d47998ad9a" class="">
</p><ol type="1" id="f3d0e964-428a-4481-9e1f-4593e888a387" class="numbered-list" start="1"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>user nginx</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: this sets the user that Nginx will run as. It’s set to the <strong><strong><strong><strong><strong>nginx</strong></strong></strong></strong></strong> user.</li></ol><ol type="1" id="7134ccff-ef08-4a40-b506-9d126db783d3" class="numbered-list" start="2"><li><code><strong><strong><strong><strong><strong>worker_processes 1;</strong></strong></strong></strong></strong></code>: This sets the number of worker processes that Nginx will use to handle incoming requests. Each worker process can handle multiple connections simultaneously, and having worker processes can improve performance in high traffic scenarios, but for the example’s sake its set to 1.</li></ol><ol type="1" id="b7f3276f-c8da-4d7c-8b1e-71b8e1eda9f1" class="numbered-list" start="3"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>error_log /var/log/nginx/error.log warn;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This sets the lcoation and level of the error log file. In this case, errors will be logged to <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>/var/log/nginx/error.log </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>and only warnings and errors will be logged.</li></ol><ol type="1" id="42562654-4529-43d8-900f-1eec4e158a15" class="numbered-list" start="4"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>pid /var/run/nginx.pid;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This sets the location of the nginx process ID file. <p id="95566851-e2e1-497c-a528-3c529cdb29d0" class=""><strong><em><span style="border-bottom:0.05em solid">SIDE NOTE</span></em></strong>: a PID file is a small file containing the process ID of a running program, which is typically used to allow other programs or scripts to interact with the running program. In this case, Nginx creates a file at the given path containing its process ID so that other programs or scripts can interact with Nginx.</p></li></ol><ol type="1" id="5e7c487f-3035-4d72-8d7f-91fccd0df75c" class="numbered-list" start="5"><li><code><strong><strong><strong><strong><strong>events {...}</strong></strong></strong></strong></strong></code>: This section sets the parameters for Nginx’s events model. This includes things like the number of connections Nginx can handle and how long it should keep idle connection pages open.</li></ol><ol type="1" id="d8f7a1fc-4fe5-4fd4-b2cf-b5c4132decaa" class="numbered-list" start="6"><li><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong>http {...}</strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: This section sets the parameters for the HTTP protocol. This includes things like the server name, the location f the server’s root directory, and the configuration for individual server blocks.</li></ol><h3 id="42fd705d-c104-4735-898d-8cb7775f6b11" class="">Location Root and Index Configuration</h3><p id="86ab410c-af22-454c-ac60-8c34ce014f20" class=""><code>root</code> and <code>index</code> determine the content of associated <code>location</code> directive block.</p><p id="ef447720-4f8d-4097-9fbd-205d0ae2bdc4" class="">Example:</p><pre id="383a39de-4501-43e9-a03d-9a4ee8dab0c1" class="code"><code>location / {
    root html;
    index index.html index.htm;
}</code></pre><p id="bc739ad6-8dd7-4981-bd9f-f7d120979848" class="">in this example, the document root is located in the <code>html/</code> directory. Under the defaullt installation prefix for the NGINX, the full path to this location <code>/etc/nginx/html/</code>.</p><p id="8a429ca6-9a91-4165-bcd2-fe3b8da5af03" class="">
</p><h2 id="f1900778-9646-420c-8ca1-2af68a8e3af5" class="">Now that we got this off our way..</h2><p id="62d59efa-15f5-4ad4-a3ba-87feeb5d90a8" class="">I ended up using a <code>default.conf</code> file instead of the <code>nginx.conf</code> one, there is no big difference between them.</p><p id="cfe167af-844d-40c4-bc0f-3cba2a274fd2" class="">The difference in a nutshell would be, the nginx.conf file is the main configuration file for Nginx, while default.conf is a configuration file for a specific Nginx block, which is a way of grouping together configuration settings that apply to a particular set of requests. It contains settings such as server name, liste, and location directives, which apply only to the specific server block that the file is associated with.</p><p id="9d5ad73a-5380-4c85-a3b1-9ef194965e5b" class="">Here is my <code>default.conf</code> file:</p><pre id="6256796e-5499-4902-a9e7-222242498c5c" class="code"><code>server {
    listen 443 ssl;
    root /var/www/html/wordpress;
    index index.php;

    ssl_certificate /etc/ssl/certificate.crt;
    ssl_certificate_key /etc/ssl/private.key;
    autoindex on;
    ssl_protocols TLSv1.2 TLSv1.3;

    location / {
    try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass wordpress:9000;
    }
}</code></pre><ol type="1" id="160e7375-9f24-4466-97f6-8058fe221755" class="numbered-list" start="1"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>listen 443 ssl;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>:</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> This line indicates that the server should listen on port 443 for HTTPS traffic and use SSL encryption (I’ll explain it bellow).</li></ol><ol type="1" id="c79c7419-7bd3-4a74-a93a-a899ee181cad" class="numbered-list" start="2"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>root /var/www/html/wordpress;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This sets the root directory for the server to <strong><code>/var/www/wordpress</code></strong>, where the Wordpress site’s files are located.</li></ol><ol type="1" id="fbbd047e-065f-4cb2-86e8-7aa542e94d7b" class="numbered-list" start="3"><li><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>index index.php</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: This line tells the server to use <strong><strong><strong><strong><strong><strong><strong><strong><strong>index.php</strong></strong></strong></strong></strong></strong></strong></strong></strong> as the default index file if a directory is requested.</li></ol><ol type="1" id="3ea49093-a36d-4c16-ab26-130b68b46b8b" class="numbered-list" start="4"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>ssl_certificate /etc/ssl/certificate.crt;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code> and <code><strong><strong><strong><strong><strong><strong><strong><strong>ssl_certificate_key /etc/ssl/private.key</strong></strong></strong></strong></strong></strong></strong></strong></code>: These lines specify the SSL certificate and key file to be used for HTTPS encryption.</li></ol><ol type="1" id="32943650-ed2a-41d0-ac97-7efa6c251df3" class="numbered-list" start="5"><li><code><strong><strong><strong><strong><strong>autoindex on;</strong></strong></strong></strong></strong></code>: This enables automatic directory indexing, so that users can browse directories and files on the server.</li></ol><ol type="1" id="0e4440a5-7532-41d9-99fe-6b5589cb2af0" class="numbered-list" start="6"><li><code><strong><strong><strong><strong>ssl_protocols TLSv1,2 TLSv1.3</strong></strong></strong></strong></code>: This specifies which SSL protocols to allow for HTTPS connections.</li></ol><ol type="1" id="2ddd4774-a7ac-4c2b-81c8-a667658e698c" class="numbered-list" start="7"><li><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>location / {...}</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: This block of code handles requests to the root URL of the server (i.e <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>https://example.com/</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>), and uses the <code><strong><strong><strong><strong>try_files</strong></strong></strong></strong></code> directive to try to find the requested file or return a 404 error if it cannot be found.</li></ol><ol type="1" id="cbf5b2d3-bc6e-4330-85c9-fdf4f2511613" class="numbered-list" start="8"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>location ~ \.php$ {...}</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This block of code handles requests for PHP files (files ending with .php), and passes them off to the FastCGI server running on the ‘<strong><strong><strong><strong><strong><strong><strong><strong><strong>wordpress</strong></strong></strong></strong></strong></strong></strong></strong></strong>’<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong> </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>container at port 9000. The <code><strong><strong><strong><strong><strong><strong><strong><strong>include</strong></strong></strong></strong></strong></strong></strong></strong></code> directive is used to include the <strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>fastcgi-php.conf</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong> file, which contains the FastCGI configuration for PHP. (more on why we need these lines, fastCGI and wordpress at the appropriate sections)</li></ol><h2 id="78143559-69e4-43aa-86d3-bab8e10a5f3f" class="">SSL Certification</h2><p id="e7241727-a916-436b-8cd3-51ea338939b9" class="">
</p><p id="8b4d38a1-15db-4f61-b1c7-3897b4ca347f" class="">is a digital certificate that authenticates a website’s identity and enales an encrypted connection. </p><p id="625f4e87-51ce-428e-a1a9-970cdc0b23d0" class="">It keeps the connection secure and prevents others from reading o modifying information transferred between two systems.</p><p id="1d7feeef-fb11-4578-9cf8-73b503aea3cb" class="">It works by ensuring that any data transferred between users and websites, or between two systems remains impossible to read.</p><p id="d059c3b5-6baf-403d-af32-7a332791f84b" class="">It uses encryption algorithms to scramble data in transit, which prevents hackers from reading it as it is sent over the connection.</p><p id="2338189c-7269-4387-a6d8-d319d4cd6bcd" class="">The process (handshake) works like this:</p><ol type="1" id="e76accc0-7012-4a80-8166-f8b8f2d715ba" class="numbered-list" start="1"><li>A browser or server attemps to connect to a website secured with ssl.</li></ol><ol type="1" id="f8411077-efc2-4c34-80b8-4bf7573a461e" class="numbered-list" start="2"><li>The browser or server requests that the web server to indentify itself.</li></ol><ol type="1" id="2db6ef43-81ee-4b9f-a201-f976a88b5b59" class="numbered-list" start="3"><li>The web server sends the browser or a server a copy of its SSL certificate in response.</li></ol><ol type="1" id="5af77782-c976-4560-81c1-80b169929f6e" class="numbered-list" start="4"><li>The browser or server checks to see whether it trusts the SSL certificate in response.</li></ol><ol type="1" id="9b80d504-54a1-47e6-98f1-910dcc9ea652" class="numbered-list" start="5"><li>The web server then returns a digitally signed acknowledgement to start an SSL encrypted session</li></ol><ol type="1" id="1125eea5-7a16-4f1d-b94e-6ed631bdf2d7" class="numbered-list" start="6"><li>Encrypted data is shared between the browser and the web server.</li></ol><p id="9ee644d5-4392-4a51-81a5-cd7f71ebb20a" class="">
</p><p id="59e3da1b-0165-46bb-b45d-bdb560b998c1" class="">To generate a TLS 1.2 or TLS 1.3 certificate using OpenSSL, you can use the <code><strong>genpkey</strong></code>
 and <code><strong>req </strong></code>commands, similar to how you would generate a self-signed certificate.</p><p id="e525ea05-6a27-4160-bad9-73700a4f38ae" class="">
</p><ol type="1" id="a149b5f8-0025-45a9-9eb1-b62c1e4fba4e" class="numbered-list" start="1"><li>Generate a private key:<p id="04e0d6b1-1636-4389-918b-efecf27aa1f4" class=""><code>openssl genpkey -algorithm RSA -out private.key</code></p></li></ol><ol type="1" id="f8289043-774d-4a85-8ead-8a4046251fcf" class="numbered-list" start="2"><li>Generate a certificate signing request (CSR): <p id="be1aada3-42fd-4695-a963-bb29d0ebde1b" class=""><code>openssl req -new -key private.key -out csr.pem</code></p></li></ol><ol type="1" id="122d0f38-74e7-43bc-8477-e6d0c41ec273" class="numbered-list" start="3"><li>Generate a self-signed certificate:<p id="5a18716d-071d-49ab-aee5-cb70496090c3" class=""><code>openssl x509 -req -days 365 -in csr.pem -signkey private.key -out certificate.crt</code></p></li></ol><p id="58ccb8d6-69c6-4850-88be-ca69b3b4fa0c" class="">
</p><p id="a34814c0-1ba1-4f81-b2d4-8bd3ba4b939a" class="">Once we have the ssl certificate, we need to configure our nginx server.</p><p id="8f89b6e2-41a9-425b-90b6-8198e9b59544" class="">We need to add the following modifications to the Dockerfile:</p><p id="c6e9ed60-a1dd-43a8-b12a-22924e9f979b" class="">
</p><pre id="7b48ac95-045e-475c-afc7-d6ed36306fae" class="code"><code>COPY certificate.crt /etc/ssl/

COPY private.key /etc/ssl/</code></pre><p id="f3fa53ab-abd7-43da-97c8-d97355fdee08" class="">
</p><p id="14a37acf-c56f-48ca-91d7-0b19d4c4fb24" class="">Then, the following lines to the nginx configuration file:</p><pre id="cedb34fb-a18e-4e42-b36e-b9a825b1a4a9" class="code"><code>listen 443 ssl;

ssl_certificate /etc/ssl/certificate.crt;
ssl_certificate_key /etc/ssl/private.key;

ssl_protocols TLSv1.2 TLSv1.3;</code></pre><p id="a429f750-470c-4355-b124-462841c4a959" class="">
</p><p id="401b04c9-4dd3-4eb1-97c9-d69462fc0e6d" class=""><mark class="highlight-red_background">NOTE: 443 port is used for HTTPs connections, which use the SSL/TLS protocols.</mark></p><p id="0a085efc-f043-4b00-98d9-bdcc4b5dff68" class="">
</p><h2 id="cb06dac6-eb0f-4343-ad2e-ea69500fbc09" class="">Now that we setup the web server, we move on to the database.</h2><p id="bab4db27-39a5-46f9-b52a-b5fa3af3ff6f" class="">The database specified in the subject is <strong><strong><strong><strong>MariaDB.</strong></strong></strong></strong></p><h3 id="cc9726b5-01f7-46c0-81f7-1df8e7913085" class=""><mark class="highlight-teal"><strong>What is MariaDB?</strong></mark></h3><p id="96c2f1a1-c402-49da-bd76-22c78c91e17b" class="">MariaDB is a fork of mySQL, more or less like an enhanced, drop-in replacement version of MySQL.</p><p id="7101ba8d-8f20-40fa-849a-36b31f104dae" class="">A drop-in replacement means that you can substitute the standard mySQL server with the analog version of the MariaDB server and take full advantage of the improvements in the MariaDB without the need to modify your application code.</p><p id="ca2c552d-aa72-4bf7-82fd-636974ee98ad" class="">It supports more storage engines that MySQL, and includes mmany plugins and tools that make it versatile for lots of use cases.</p><h3 id="29a5be9b-cff1-4539-a6ad-f93d23cdc8e2" class="">MariaDB Configuration</h3><p id="dcbde80f-fc2c-4d19-b231-bb79af252210" class="">Create a Dockerfile to setup the MariaDB container.</p><pre id="b9fead45-5e59-43e6-8621-0c5cbb345447" class="code"><code>FROM debian:buster

RUN apt-get update &amp;&amp; apt-get install -y mariadb-server

COPY ./tools/script ./script

COPY ./tools/50-server.cnf /etc/mysql/mariadb.conf.d/

RUN chmod +x script

RUN ./script

CMD [&quot;mysqld&quot;]</code></pre><p id="29c6c3a7-3c99-4fce-8803-b323d5648ac7" class="">The Dockerfile is pretty similar to the nginx one with some key differences which are:</p><ul id="a3655207-1555-4a51-a96e-ea9d3c5155fa" class="bulleted-list"><li style="list-style-type:disc">The installation of <code><strong><strong><strong><strong>mariadb-server</strong></strong></strong></strong></code>.</li></ul><ul id="b82d505e-9ea8-4d47-9280-f7f35553f256" class="bulleted-list"><li style="list-style-type:disc">Copying <code><strong><strong><strong><strong><strong>script</strong></strong></strong></strong></strong></code> into the root of the container, you may be wondering what do we need the script for. So when setting up the database we’ve got to create one to begin with, and a database user, which shouldn’t contain the word admin/Admin or administrator/Administrator or any variation of the word and finally we must to modify the root to require a password.<p id="2a8b1275-b977-4889-b640-b89e25a815de" class="">My script is as such:</p></li></ul><pre id="a4729047-da8e-4e68-97fd-163149eccd83" class="code"><code>service mysql start 
mariadb -u root -e &quot;CREATE DATABASE &lt;your db name&gt; ; CREATE USER &#x27;&lt;your username&gt;&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;&lt;your password&gt;&#x27; 
; REQUIRE NOT REGEXP &#x27;admin|Admin|administrator|Administrator&#x27;; GRANT ALL PRIVILEGES ON &lt;db name&gt;.* TO &#x27;&lt;username&gt;&#x27;@&#x27;%&#x27;; FLUSH PRIVILEGES; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;&lt;new root password&gt;&#x27;; FLUSH PRIVILEGES;&quot;

exec $@</code></pre><ol type="1" id="28bbcaae-61be-42fa-a294-0ba5074b9260" class="numbered-list" start="1"><li><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>service mysql start</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: This command starts <strong><code><strong><strong><strong><strong>mysql</strong></strong></strong></strong></code></strong>.</li></ol><ol type="1" id="f7684b99-5e09-43e4-9e9f-66d116906a0f" class="numbered-list" start="2"><li><code><strong><strong><strong><strong><strong>mariadb -u root -e &quot;...&quot;</strong></strong></strong></strong></strong></code>: This command runs mariadb as the user ‘<strong><strong><strong><strong>root</strong></strong></strong></strong>’ and by using the flag <strong><strong><strong>-e </strong></strong></strong>we’re able to execute the SQL queries given.<p id="7b8335c5-51c9-41a4-b352-6d7155225267" class="">If you’re running the container for testing purposes and wanna try this, just use the <code><strong><strong><strong><strong><strong>mariadb -u root</strong></strong></strong></strong></strong></code> command. It’ll open mariadb for you and then you can test the queries as you want. (Don’t forget ‘;’ at the end of the query ;)).</p></li></ol><ol type="1" id="a58825f7-a51b-467e-8dce-34a981084bff" class="numbered-list" start="3"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>CREATE DATABASE &lt;db name&gt;;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This query creates a database with the given name (replace the value between brackets with your db name).</li></ol><ol type="1" id="0bf4acf4-64a1-4d5f-b5a3-8f429d171092" class="numbered-list" start="4"><li><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>CREATE USER &#x27;&lt;username&gt;&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: This query creates a database user with the given name and the given password.</li></ol><ol type="1" id="2a81b322-82e7-4c7f-88f8-8ded59400363" class="numbered-list" start="5"><li><code><strong><strong><strong><strong>REQUIRE NOT REGEXP &#x27;admin|Admin|administrator|Administrator&#x27;;</strong></strong></strong></strong></code>: This is what I used to prevent the creation of a user with the given words as required in the subject.</li></ol><ol type="1" id="09efcbb0-5bbb-440e-9910-4b33c0d25987" class="numbered-list" start="6"><li><code><strong><strong><strong><strong>GRANT ALL PRIVILEGES ON &lt;db name&gt; TO &lt;username&gt;&#x27;@&#x27;%&#x27;; FLUSH PRIVILEGES;</strong></strong></strong></strong></code><strong><strong><strong><strong> </strong></strong></strong></strong>: is used to grant all available privileges on a database to a user. This means that the user will have full access to manipulate, modify and delete data.</li></ol><ol type="1" id="8b0f9d30-342f-455a-bfe0-07a49a7155a8" class="numbered-list" start="7"><li><strong><code>ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;&lt;new root password&gt;&#x27;; FLUSH PRIVILEGES;</code></strong><strong>: </strong>This command is used to modify the root password.</li></ol><ol type="1" id="113bb207-91b3-4391-9e59-eec9ecf92838" class="numbered-list" start="8"><li><strong><code><strong><strong><strong><strong><strong><strong>exec $@</strong></strong></strong></strong></strong></strong></code></strong>: This is usually used to replace the current shell process with the command specified in the argument, but in our case if you look at the docker file <code><strong><strong>CMD [&quot;mysqld&quot;] </strong></strong></code>needs to execute after <strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>RUN ./script </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>is executed, that’s why we added that line at the script, otherwise the CMD in Dockerfile woulnd’t run.</li></ol><h2 id="38a77e97-b1be-4081-b3f9-5031f3bcb1ee" class="">Now that the database is up and running we move on to Wordpress.</h2><h3 id="5fae58b9-f16b-4c25-a937-80c5a8f45af9" class=""><mark class="highlight-teal">What is Wordpress?</mark></h3><p id="65edfd74-99ba-4815-9aff-3fafc7e9cc15" class="">Wordpress is a content management system (CMS) that allows you to host and build websites. It contains plugin architecture and a template system so you can customize any website to fit your needs.</p><p id="342967e5-f799-46e6-8f0c-a099358fe6d9" class="">Back with the kitchen analogies, Wordpress can be thought of as a chef’s kitchen. Just as the chef’s kitchen has all the tools and equipment necessary to prepare and cool meals, Wordpress has all the tools and plugins necessary to create a functional website.</p><p id="749fb1fa-8564-4afd-8b3e-20d9dc7784fe" class="">The Wordpress Dockerfile would look a little like this:</p><pre id="fd1508f0-ff7d-49fe-9496-0d87f1a9f578" class="code"><code>FROM debian:buster

RUN apt-get update &amp;&amp; apt-get install -y php7.3 \
php7.3-fpm php7.3-mysql mariadb-client \
nginx curl

# Downloading WP-CLI
RUN curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar

# Making the wp-cli.phar file executable and moving it to the /usr/local/bin/ path
# and renaming it &#x27;wp&#x27; to use that as the command and not &#x27;wp-cli.phar&#x27;
RUN chmod +x wp-cli.phar &amp;&amp; mv wp-cli.phar /usr/local/bin/wp

COPY ./tools/script.sh /script.sh
COPY ./tools/www.conf /etc/php/7.3/fpm/pool.d/

RUN chmod +x script.sh

RUN mkdir /run/php/
ENTRYPOINT [&quot;sh&quot;, &quot;script.sh&quot;]

CMD [&quot;php-fpm7.3&quot;, &quot;-R&quot;, &quot;-F&quot;]</code></pre><p id="960c2827-54c7-47a9-9c35-612fcb23e4f4" class="">
</p><p id="de41c747-9528-4883-86a6-90141e4629ef" class="">If you wanna know more about what is WP-CLI (Wordpress Command-line interface) and how to install it click <a href="https://www.hostinger.com/tutorials/wp-cli">here</a>.</p><p id="224c792c-d616-42d5-8d1c-68c32ce32257" class="">
</p><p id="281baed5-a70b-4d4e-80ea-54c1ff66c020" class="">As you make have noticed, there is another script here that I copy inside the container. Here is it’s content:</p><pre id="ae9d6ed5-b5fe-4600-8837-f780d27853dd" class="code"><code>cd /var/www/html/wordpress
#Downloading and extracting Wordpress core files to the current directory
wp core download --allow-root

# Creating the wp-config.php file using this command.
wp core config --dbname=${MYSQL_DATABASE} --dbuser=${MYSQL_USER} --dbpass=${MYSQL_PASSWORD} --dbhost=mariadb --allow-root

# Installing wordpress using the given environment variables to avoid showing the wordpress installation page everytime we run the container
wp core install --url=${DOMAIN_NAME} --title=DopamInception --admin_user=${WP_USER} --admin_password=${WP_PW} --admin_email=${WP_EMAIL} --allow-root

exec $@</code></pre><p id="858af281-53a2-4ce7-a4e0-9f1944b11bfb" class="">This script creates a wp-config.php file with the given environment variables, we need a wp-config file to tell Wordpress the settings needed for database connection, and other options that are specific to the site. </p><p id="ea8ec200-2417-498a-8473-b138cf129694" class="">Essentially it’s like the “brain” of the Wordpress site, providing the necessary information and settings for the site to function properly.</p><p id="2e6c1df0-45d4-4c79-8e87-c0997cab390e" class="">
</p><p id="e9f6ac3c-a4aa-45ef-8b8c-b329102e2523" class="">Let’s rewind back a little to the Wordpress Dockerfile, you can see php-fpm and seen it mentioned on the subject, so what is is exactly? and why do we need it?</p><h2 id="443be901-670e-47d5-8d0f-a5d1d303481d" class=""><mark class="highlight-teal">PHP-FPM</mark></h2><p id="6c8b14cd-b16b-4ba5-9470-d5a56c291d8f" class="">FPM is a PHP <a href="https://www.notion.so/FastCGI-explained-a008f16f573e43ae8cf7d3f9aa9dd92a">FastCGI</a> implementation that includes additional features for managing FastCGI processes. Just like FastCGI it creates a pool of processes that can handle incoming requests.</p><p id="49428b14-aec1-4df7-bd8d-20db877d4edc" class="">It can be configured to use different process management strategies, such as dynamic or static process allocation. Its commonly used with NGINX web server and typically used in high-traffic web environments where performance and scalibility are important consideration.</p><p id="ca58aee3-788e-403a-abb5-0028c48cca19" class="">
</p><p id="e545a0d1-a77c-4a65-bacd-18990893674b" class="">Now that we have all services done, we need to run them all together, and in order for us to do that, we need something called <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Docker Compose, </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>so what is it? How and why use it?</p><h2 id="3df1d98f-f4a8-40ce-8fbb-0f9870ce2b71" class=""><mark class="highlight-blue_background">Docker Compose</mark></h2><p id="6d15144d-0fc7-4c6e-a3bc-1454196818c6" class="">Its a tool for defining and running multi-container Docker applications using a compose file.</p><p id="334e28f1-594f-43e0-94c2-37af42ceae1c" class="">The compose file is a <mark class="highlight-teal"><a href="https://yaml.org/">YAML</a></mark> file defining services, networks and volumes for a Docker application.</p><p id="a57f2aa0-b1f5-4aad-a389-1f04c9733d9d" class="">Used to define multi-containers applications.</p><p id="cbf4fc0c-44ad-43e5-ab0f-6fa40be23a12" class="">The compose specification allows one to define a platform-agnostic container based application, such an app is designed as a set of containers which have to both run together with adequate shared resources and communication channels.</p><p id="879950de-f251-4d23-9251-1a10d6c4d9dd" class="">Computing components of an application are defined as <mark class="highlight-red">Services.</mark><div class="indented"><p id="0d7418cd-7e4c-4939-9d11-552bcd5aebcb" class=""><mark class="highlight-red">Services</mark>: an abstract concept implemented on platforms by running the same container image (or configuration) one or more times.</p><p id="71fccaba-f1b9-473f-9310-876f72dec166" class="">In our case, MariaDB, Wordpress and NGINX are seperate <strong><strong><strong><strong><strong><strong><strong><strong><strong>services.</strong></strong></strong></strong></strong></strong></strong></strong></strong></p></div></p><p id="c9ad5ecd-391b-42f7-88ad-c53e5d7303f7" class="">Services communicate with each other through <mark class="highlight-red">Networks.</mark><div class="indented"><p id="f5f9115b-c5f8-4099-98d8-fbf2e2d4a957" class=""><mark class="highlight-red">Networks: </mark>is a platform capibility abstraction to establish an IP route between containers whithin services connected together.</p><p id="dd378007-5e52-4bb8-973a-cd695125eabd" class="">In a less nerdy manner, Networks are like a party conversation circle. It’s a space where your guests (containers) can “talk” to each other, share information and work together.</p><p id="e53a8845-e951-4206-9c4e-89fd238c9ee6" class="">In a nutshell, it allows you to create a secure and isolated environment for your containers to communicate in without exposing them to the outside world.</p></div></p><p id="2c7464a0-42f3-482d-b36c-efd1d9c1ecc2" class="">Services store and share persistent data into Volumes.<div class="indented"><p id="8e768e5e-b520-4035-b099-c62fc3b15622" class=""><a href="https://www.notion.so/VOLUMES-a3ca0e2a4d514341a3417b6028617052"><mark class="highlight-red">Volumes</mark></a>: persist data outside the container so it can be backed up or shared. Docker volumes are dependent on Docker’s file system. When a container is started, Docker loads the read-only image layer, adds a read-write layer on top of the image stack, and mounts the volumes onto the container filesystem.</p><p id="0db7ec5e-19d2-48e2-a0f5-55aa1ebc7e78" class="">
</p></div></p><h3 id="12cd2d27-e06b-442c-9e4f-ba26ec33c2aa" class="">Multi-Container deployment of Wordpress using Docker</h3><p id="e2aeb398-6fca-4ef0-a047-c628f0cc951b" class="">
</p><figure id="2be60582-e069-4590-a4d0-a1664e4688fa" class="image"><a href="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-01-25_at_1.29.51_PM.png"><img style="width:1348px" src="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-01-25_at_1.29.51_PM.png"/></a></figure><p id="5df6107a-30a5-4133-81d6-4da1f9f2a979" class="">
</p><h3 id="d1baa1a7-24f3-410a-b415-3e16850763aa" class="">Overview of the installation process</h3><p id="b640e216-8aaf-44da-b432-c5703b2c2bcf" class="">
</p><figure id="239b3e3a-b79b-469b-bcab-73ab649c6787" class="image"><a href="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-01-25_at_1.31.16_PM.png"><img style="width:576px" src="Inception%20e9df0b89eb3d44bd81af5e7e6d7e0fb8/Screen_Shot_2023-01-25_at_1.31.16_PM.png"/></a></figure><p id="0bac7cad-ee17-4ee1-b7cf-931993fb2367" class="">
</p><h3 id="f1e4bb1e-3d8d-441d-a4f1-9cb16a11eeec" class="">Now you may have an idea where we’re going</h3><p id="c2e282e8-28ad-4820-ab52-740c09870dc8" class="">After creating a docker-compose.yml, we need to setup the services we tackled earlier.</p><h3 id="fd9d1c4f-0d68-4f63-b539-2fda7af4860a" class="">Wordpress configuration</h3><pre id="9d069aec-7d5a-483c-bc97-f4796f2e9244" class="code"><code>wordpress:
    container_name: wordpress
    build: ./requirements/wordpress
    volumes:
      - wordpress:/var/www/html/wordpress
    env_file:
      - .env
    networks:
      - wordpress
    depends_on:
      - mariadb
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE}
      - MYSQL_USER=${MYSQL_USER}
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
      - WORDPRESS_DB_HOST=${WORDPRESS_DB_HOST}
      - WORDPRESS_DB_NAME=${WORDPRESS_DB_NAME}
      - WORDPRESS_DB_PASSWORD=${WORDPRESS_DB_PASSWORD}
      - WORDPRESS_TABLE_PREFIX=${WORDPRESS_TABLE_PREFIX}
    ports:
      - 9000:9000
    restart: always
    init : true</code></pre><p id="91236c8f-603d-45ba-9046-9d99bd40e299" class="">As you can see we defined the service’s name ‘wordpress’ in the first line.</p><p id="40e83534-0c5c-4182-b403-d650e148df02" class="">Then:</p><ul id="475e216f-8f0e-42cc-b264-8b80a08243ff" class="bulleted-list"><li style="list-style-type:disc"><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>container_name: wordpress</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: As the keyword implies, this line is for naming the container.</li></ul><ul id="7153ee96-dcc6-46c5-bd65-f1e605326ab1" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong>build</strong></strong></strong></strong></code></strong>: specifies the directory containing the Dockerfile for building the image for the container.</li></ul><ul id="85540a92-095c-4e70-b2ae-f34168b393ab" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong><strong><strong>volumes</strong></strong></strong></strong></strong></strong></code></strong>: sets up a volume named <strong><strong><strong><strong><strong><strong><strong><strong><strong>wordpress</strong></strong></strong></strong></strong></strong></strong></strong></strong> which is mounted to <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>/var/www/html/wordpress.</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><p id="b945deae-f6bd-4e3f-b7c2-8c55c8e91092" class="">Since we mentioned <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>volumes</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> here why not get on with explaining what they are and why do we use them for.</p><h3 id="8013d53d-219a-4ca7-ae66-d5b6dc73cb93" class=""><mark class="highlight-teal">Volumes</mark></h3><p id="6096c63b-a1af-49f1-8d2b-78fe2de6a969" class="">In Docker a volume is a way to persist data beyond the lifetime of a container. It’s essentially a directory or a folder that can be mounted to a container, providing it with acces to the data stored in that directory.</p><p id="01c3bc96-892e-4526-b59f-dedc1ca00b75" class="">To put it simply, Volumes are like Dropbox or Google drive. Just like how you create a folder in them to share it with other users, you can create a volume in Docker and share it with other containers.</p><p id="e32a6df5-3160-4fb3-89e7-ee41bc7e0e10" class="">The reason why we need them in our case is that we need to share data between the wordpress container and the database container (we’ll see that next). By mounting these volumes we ensure that the data generated by the containers, isn’t lost when the containers are deleted or restarted.</p></li></ul><ul id="7b778bd0-cb67-48dc-a84d-fba18dc11af3" class="bulleted-list"><li style="list-style-type:disc"><code><strong><strong><strong><strong><strong><strong><strong><strong>env_file</strong></strong></strong></strong></strong></strong></strong></strong></code>: specifies the file that contains the environment variables.</li></ul><ul id="5a3f0486-b10b-437d-8ba1-b0ee8aa5a82d" class="bulleted-list"><li style="list-style-type:disc"><code><strong><strong><strong><strong><strong><strong><strong>networks</strong></strong></strong></strong></strong></strong></strong></code>: creating a network called ‘Wordpress’ that will be used by the container specified.</li></ul><ul id="0269bfbc-9cb3-4797-a89b-106dbd3722d0" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>depends_on</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: sets the order on which the services must start and stop, in this case, the mariadb container will run first because the web application (wordpress) needs the database up and running to work properly.</li></ul><ul id="6e1b5c01-209a-4361-a384-498af78328a1" class="bulleted-list"><li style="list-style-type:disc"><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>environment</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code>: sets the environment variables needed in the container.</li></ul><p id="63c9888e-ad1e-4a58-b436-7b3cbdc76577" class=""><mark class="highlight-red_background">NOTE: the Wordpress environment variables:</mark></p><p id="d589f561-84a6-4c64-8ead-b447ef3561b2" class=""><mark class="highlight-red_background"><strong>MYSQL_ROOT_PASSWORD,</strong></mark></p><p id="e3a70320-ce32-40b8-8c4d-bed68421e031" class=""><mark class="highlight-red_background"><strong>WORDPRESS_DB_NAME,</strong></mark></p><p id="72075780-876b-4a58-b2ed-aea3ec509c43" class=""><mark class="highlight-red_background"><strong>WORDPRESS_DB_USER,</strong></mark></p><p id="4031e1be-8bf0-4668-afc9-1ca37433558e" class=""><mark class="highlight-red_background"><strong>and WORDPRESS_DB_PASSWORD</strong></mark></p><p id="0c8bf49f-b644-4a53-a6f0-7258f378ec82" class=""><mark class="highlight-red_background"><strong>MUST</strong></mark><mark class="highlight-red_background"> be matching exactly with the MariaDB environment variables</mark></p><p id="5aba8b06-8f10-4f0c-8af8-e79d6332d5d8" class=""><mark class="highlight-red_background"><strong>MYSQL_ROOT_PASSWORD,</strong></mark></p><p id="ca62c529-3b2a-4262-a10b-3ed80f9737a1" class=""><mark class="highlight-red_background"><strong>MYSQL_DATABASE,</strong></mark></p><p id="f8b54538-0660-4535-95cf-3987e3bc5265" class=""><mark class="highlight-red_background"><strong>MYSQL_USER,</strong></mark></p><p id="b5b23735-3631-422c-a749-c0c6ad4f963d" class=""><mark class="highlight-red_background"><strong>and MYSQL_PASSWORD.</strong></mark></p><p id="9e6e72a2-0ef5-498b-bb34-2e76e71669ed" class=""><mark class="highlight-red_background">In case of any mismatch, the </mark><mark class="highlight-red_background"><strong>wordpress</strong></mark><mark class="highlight-red_background"> service is dependent on the </mark><mark class="highlight-red_background"><strong>mysql</strong></mark><mark class="highlight-red_background"> service. This implies that the services are started and stopped in the dependency order.</mark></p><ul id="3aec164c-c9f6-4c61-9091-765e9f3c692c" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong><strong>ports:</strong></strong></strong></strong></strong></code></strong> used to map a container’s port to a port on the host machine. This allows communication between the container and the host machine or other containers.<p id="f66fe29c-807e-4870-8aeb-312c01067dfa" class="">the syntax is as follows <code><strong><strong><strong><strong>- &lt;host_port&gt;:&lt;container_port&gt;</strong></strong></strong></strong></code></p></li></ul><ul id="b9443d64-10aa-453a-9bf8-2340e588c9d1" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>restart: always</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: specifies the restart policy of the container. When its set to always, the docker daemon will restart the container automatically if it exits.</li></ul><ul id="9dd7d75d-e5c9-4809-9aea-69235e078ccd" class="bulleted-list"><li style="list-style-type:disc"><strong><code><strong><strong><strong><strong><strong><strong><strong><strong><strong>init: true</strong></strong></strong></strong></strong></strong></strong></strong></strong></code></strong>: This tells the docker daemon to run an initialization process before starting the container.<p id="be4f0e4a-b67f-4208-87b0-3aa5537b6b6c" class="">This is typically used in cases where we need to ensure that certain services or configurations are set up before the container starts such as creating a database schema, or setting environment variables.</p></li></ul><p id="cc555f6f-e6f2-40a6-94e2-5daa4f4d8618" class=""><mark class="highlight-teal">NGINX Configuration</mark></p><p id="4e5a4a7c-3dd2-48c6-940e-abd818d159fe" class="">adding nginx configuration to the <strong>docker-compose.yml</strong> file as a service named <strong><strong><strong><strong><strong><strong>nginx.</strong></strong></strong></strong></strong></strong></p><pre id="2d0e3510-67eb-46ff-848d-d098cd2040cb" class="code"><code>nginx:
    container_name: nginx
    depends_on: 
      - wordpress
    build: ./requirements/nginx/
    networks:
      - wordpress
    ports:
      - 443:443
    env_file:
      - .env
    volumes:
      - wordpress:/var/www/html/wordpress
    restart: always
    init : true</code></pre><p id="cd869f64-bb4e-452f-b291-550c02223e8b" class="">Similar to the Wordpress service, we set a name for the container, give the needed path to build the image, setup networks and volumes.</p><p id="91f97539-68e2-4320-afe5-aafffa8228d6" class="">
</p><h2 id="9bda9f85-c031-43e8-ad7c-b6da375f816a" class="">And last but not least..</h2><h3 id="7e035d78-bf21-435b-9b87-eb87e4d9225d" class=""><mark class="highlight-teal">Mariadb Configuration</mark></h3><pre id="7b70d058-3847-4f7b-a2e8-0d893b7c5a42" class="code"><code>mariadb:
    container_name: mariadb
    build: ./requirements/mariadb/
    restart: always
    environment:
      - MYSQL_ROOT_PASSWOR=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE}
      - MYSQL_USER=${MYSQL_USER}
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    volumes:
      -  mariadb:/var/lib/mysql/
    env_file:
      - .env
    networks:
      - wordpress
    init : true</code></pre><p id="15d0651a-d4af-457e-bf40-9bf479c1eb8c" class="">In this case the only difference is specifying a new volume for mariadb to keep the files easily managed, and well organized.</p><p id="89bbe264-5aed-40b8-95b3-156fdd938fb3" class="">We’re still using the same network because all the services need it to communicate with each other.</p><p id="ffc13cac-9ac8-47a2-94b9-c47f94680207" class="">Alongside the specification of environment variables needed inside the container.</p><p id="4683f4b1-ddd6-49ec-91b4-c270ede4b983" class="">
</p><h2 id="881d6551-6efa-416b-bf45-07f318908b8c" class="">One more thing…</h2><p id="10fb9ac8-5e74-471f-b455-4dd90244ca65" class="">Since we used networks and volumes we need to define them in sections at the bottom, starting up with networks</p><pre id="ed9d6041-5628-4c8a-beec-d5e62e3e9583" class="code"><code>networks:
  wordpress:
    driver: bridge</code></pre><p id="5a4ea294-0ace-4d68-afaa-97b7108c0ca9" class="">In the <strong><strong><strong><strong><strong><strong><strong><strong><strong>networks </strong></strong></strong></strong></strong></strong></strong></strong></strong>section we define a network called wordpress with the <strong><strong><strong><strong><strong><strong><strong>driver </strong></strong></strong></strong></strong></strong></strong>set to <strong><strong><strong><strong><strong><strong><strong>bridge</strong></strong></strong></strong></strong></strong></strong> in docker compose this is used to specify the networking driver to be used by the containers in the network. In this case, <strong><strong><strong><strong><strong><strong>bridge</strong></strong></strong></strong></strong></strong> is the default network driver used in Docker.</p><p id="9e246a86-44b6-457b-9d5c-56dfc4e80807" class="">The <strong><strong><strong><strong><strong><strong>bridge</strong></strong></strong></strong></strong></strong> network driver creates a virtual network that connects with the containers running on the same host. Each container is assigned an IP address and is able to communicate with other containers on the same network using that IP address.</p><pre id="9b5e1e25-ce98-487a-b15f-115156277008" class="code"><code>volumes :
  wordpress:
    driver: local
    driver_opts:
      type: none
      device: /home/mbaioumy/data/wordpress
      o: bind
  mariadb:
    driver: local
    driver_opts:
      type: none
      device: /home/mbaioumy/data/mariadb
      o: bind</code></pre><p id="c56503af-f963-439d-a1aa-9ab830ede3d2" class="">The blocks under the <strong><strong><strong><strong><strong><strong><strong><strong><strong>wordpress</strong></strong></strong></strong></strong></strong></strong></strong></strong> and <strong><strong><strong><strong><strong><strong><strong><strong>mariadb </strong></strong></strong></strong></strong></strong></strong></strong>names specify that the volume driver should be <strong><strong><strong><strong><strong><strong>local </strong></strong></strong></strong></strong></strong>which means that the volume is created on the <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>host machine</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>.</p><p id="404ee04d-f90a-4861-8bc2-5d465ab72452" class=""><code><strong><strong><strong><strong><strong><strong><strong><strong>driver_opts</strong></strong></strong></strong></strong></strong></strong></strong></code> provides options for the volume driver, <strong><code>type</code></strong> is set to <strong><strong><strong><strong>none</strong></strong></strong></strong> meaning that the volume isn’t managed by Docker.</p><p id="8d9e8cac-32f1-487e-91a0-8f829875033d" class=""><strong><code><strong><strong><strong><strong><strong>device</strong></strong></strong></strong></strong></code></strong> option specifies the path on the host machine where the volume is located. </p><p id="f4e179cd-527b-4598-9d7e-1f900774132f" class=""><strong><code><strong>o</strong></code></strong> option specifies the mount option, which in this case is <code><strong><strong><strong><strong>bind</strong></strong></strong></strong></code> (when <strong><strong><strong><strong><strong>bind </strong></strong></strong></strong></strong>is used a directory or file on the host is mapped to a directory or file inside the container, which allows data to be shared between the two).</p><p id="4fc7dc41-2c96-4518-8b3b-6a5c6c99c966" class="">
</p><h2 id="5c5be543-a141-4bc8-99b3-76e295a3d46f" class="">So now our docker-compose.yml file would look something like this..</h2><pre id="7f291bf7-74af-497a-887b-d373eaef5fd3" class="code"><code>version: &quot;3&quot;

services:
  mariadb:
    container_name: mariadb
    build: ./requirements/mariadb/
    restart: always
    environment:
      - MYSQL_ROOT_PASSWOR=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE}
      - MYSQL_USER=${MYSQL_USER}
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    volumes:
      -  mariadb:/var/lib/mysql/
    env_file:
      - .env
    networks:
      - wordpress
    init : true
  wordpress:
    container_name: wordpress
    build: ./requirements/wordpress
    volumes:
      - wordpress:/var/www/html/wordpress
    env_file:
      - .env
    networks:
      - wordpress
    depends_on:
      - mariadb
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - MYSQL_DATABASE=${MYSQL_DATABASE}
      - MYSQL_USER=${MYSQL_USER}
      - MYSQL_PASSWORD=${MYSQL_PASSWORD}
      - WORDPRESS_DB_HOST=${WORDPRESS_DB_HOST}
      - WORDPRESS_DB_NAME=${WORDPRESS_DB_NAME}
      - WORDPRESS_DB_PASSWORD=${WORDPRESS_DB_PASSWORD}
      - WORDPRESS_TABLE_PREFIX=${WORDPRESS_TABLE_PREFIX}
    ports:
      - 9000:9000
    restart: always
    init : true
  nginx:
    container_name: nginx
    depends_on: 
      - wordpress
    build: ./requirements/nginx/
    networks:
      - wordpress
    ports:
      - 443:443
    env_file:
      - .env
    volumes:
      - wordpress:/var/www/html/wordpress
    restart: always
    init : true

networks:
  wordpress:
    driver: bridge

volumes :
  wordpress:
    driver: local
    driver_opts:
      type: none
      device: /home/mbaioumy/data/wordpress
      o: bind
  mariadb:
    driver: local
    driver_opts:
      type: none
      device: /home/mbaioumy/data/mariadb
      o: bind</code></pre><h2 id="cfc34787-4f22-4219-8314-804fbc687377" class="">Now That we have the docker compose file over with, it’s time to run it!</h2><p id="437c6f8a-152b-40af-b0bf-53b8060c8965" class="">In order for us to run a docker compose file we need to execute the following command.</p><pre id="447d4212-ea7d-482c-95c2-ae86e0799c54" class="code"><code>docker compose up</code></pre><p id="6170880d-f23d-47cd-916a-1bd66b97874b" class="">And you’re good to go!</p><p id="e6eb79cd-5927-461b-981f-76a3e4a2e873" class="">
</p><p id="5ce4bb5d-7760-4d25-aa60-1d0257e9ebbd" class="">
</p><p id="30ba7ca7-5c32-453d-9059-5c4289b2bcbf" class="">Sources:</p><p id="9927c63b-9589-46a7-b982-595aaab0c1ad" class=""><a href="https://docs.docker.com/">https://docs.docker.com/</a></p><p id="8464bf48-9596-484d-8b15-f19dca52a918" class=""><a href="https://frontendmasters.com/courses/complete-intro-containers/">https://frontendmasters.com/courses/complete-intro-containers/</a></p><p id="23ef43d4-d24f-41dd-a1a0-59a79574d8e1" class=""><a href="https://www.plesk.com/blog/various/why-do-you-need-php-fpm/">https://www.plesk.com/blog/various/why-do-you-need-php-fpm/</a></p><p id="7610c41b-6371-4d27-9b16-7753141736f7" class=""><a href="https://www.digitalocean.com/community/tutorials/php-fpm-nginx">https://www.digitalocean.com/community/tutorials/php-fpm-nginx</a></p><p id="c586a304-09bb-4bbd-95d0-88de1462eeea" class=""><a href="https://blog.devsense.com/2019/php-nginx-docker">https://blog.devsense.com/2019/php-nginx-docker</a></p><p id="a464d99e-c7c5-4b3c-8b66-8008db4a5433" class=""><a href="https://techviewleo.com/install-wordpress-on-debian-with-nginx-and-lets-encrypt/">https://techviewleo.com/install-wordpress-on-debian-with-nginx-and-lets-encrypt/</a></p><p id="dfc88aa2-4987-4bcf-8e90-cba2f39eea26" class=""><a href="https://www.hostinger.com/tutorials/wp-cli">https://www.hostinger.com/tutorials/wp-cli</a></p><p id="68ea1672-1bef-4276-a53d-1a1e54c2d317" class="">CHATGPT</p><figure id="a008f16f-573e-43ae-8cf7-d3f9aa9dd92a" class="link-to-page"><a href="https://www.notion.so/FastCGI-explained-a008f16f573e43ae8cf7d3f9aa9dd92a">FastCGI explained</a></figure><p id="87a01bb6-c834-4cd4-93a9-347f7f1326e9" class="">
</p><p id="af0909ef-9e2e-420d-b4ba-8b2addb2d555" class="">
</p><p id="7096fc04-02f1-4828-93a9-d54724b60749" class="">
</p></div></article></body></html>